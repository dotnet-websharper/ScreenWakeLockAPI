import { Start as fK } from "./WebSharper.Core.JavaScript/Runtime.js"
import { MarkResizable as fL, SetOptional as fM, Lazy as fN, GetOptional as fO, CreateFuncWithArgs as fP, DeleteEmptyFields as fQ, Create as fR, OnLoad as fS } from "./WebSharper.Core.JavaScript/Runtime.js"
function a(fT){ return"Dispose"in fT;}
function b(){ const fT=new n("New_1");const fU=(fT.h.push(new F("status", c().View)),fT);const fV=(fU.h.push(q(fU.k, "wakebutton", () => fU.i, () => { const f0=null;N(K(() => L(V(d()), () => M(null))), null);})),fU);const fW=r(fV.k, fV.h, []);const fX=new i(fW[1], D(fW[0]));let fY=(fV.i=fX,fX);const fZ=fY.Doc;u0030("");bh.RunById("main", fZ);}
function c(){ return G.statusMessage;}
function d(){ const fT=null;return new Promise((fU) => { fU(new Promise((fV) => { fV(globalThis.navigator.wakeLock.request("screen").then((fW) => { c().Set("Screen Wake Lock is active!");fW.addEventListener("release", () => c().Set("Wake Lock released!"));return Promise.resolve(null);}));})["catch"]((fV) => { const fW=W(fV);c().Set("Wake Lock Error: "+String(fW.message));return Promise.resolve(null);}));});}
function e(fT){ throw new Error(fT);}
function f(fT){ return[fT.K, fT.V];}
function g(fT, fU){ const fV=1+fU-fT;return fV<=0?[]:bz(fV, (fW) => fW+fT);}
class h { Equals(fT){ return this===fT;} GetHashCode(){ return -1;} }
class i extends h { doc;allVars;anchorRoot;get Doc(){ return this.doc;} SetAnchorRoot(fT){ this.anchorRoot=fT;} constructor(fT, fU){ super();this.doc=fU;this.allVars=fT.$==0?fT.$0:e("Should not happen");this.anchorRoot=null;} }
function j(fT, fU){ l(fT, fU);return fT[fU];}
function k(fT, fU, fV){ l(fT, fU);fT[fU]=fV;}
function l(fT, fU){ if(fU<0||fU>=fT.length)e("Index was outside the bounds of the array.");}
function m(fT){ return fT.dims===2?fT.length*fT.length:fT.length;}
class n extends h { i;k;h;s;static New_1(){ return new this("New_1");} constructor(fT){ if(fT=="New_1"){ let fU;super();this.i=null;this.k=(fU=H(),String(fU));this.h=fL([]);fM(this, "s", null);} } }
class o extends h { ForTextView(){ console.warn("Content hole filled with attribute data", this.Name);return null;} AddAttribute(fT, fU){ console.warn("Var hole filled with non-Var data", this.Name);} get AsChoiceView(){ console.warn("Attribute value hole filled with non-text data", this.Name);return ei("");} }
class p extends h { }
function q(fT, fU, fV, fW){ return new I(fU, (fX) =>(fY) => { const fZ=fV();fZ.SetAnchorRoot(fX);return fW({Vars:fZ, Anchors:fZ, Target:fX, Event:fY});});}
function r(fT, fU, fV){ const fW=new bi("New_5");const fX=new bp("New_3");const fY=cx(fU);try { while(fY.MoveNext()){ const fZ=fY.Current;const f0=fZ.Name;fX.SAdd(f0);fW.set_Item(f0, fZ);} } finally { if(typeof fY=="object"&&a(fY))fY.Dispose();} return[bq(fU, bF((f1) => { const f2=f1[0];const f3=f1[1];const f4=f1[2];if(fX.Contains(f2))return null;else { const f5=f3===0?bU.GetOrAddHoleFor(fT, f2, () => { const f6=f4==null?null:Z(f4.$0);let f7=bj.Create_1(f6==null?"":f6.$0);return new bV(f2, f7);}):f3===1?bU.GetOrAddHoleFor(fT, f2, () => { const f6=f4==null?null:Z(f4.$0);let f7=bj.Create_1(f6==null?0:f6.$0);return new bW(f2, f7);}):f3===2?bU.GetOrAddHoleFor(fT, f2, () => { const f6=f4==null?null:Z(f4.$0);let f7=bj.Create_1(f6==null?false:f6.$0);return new bX(f2, f7);}):f3===3?bU.GetOrAddHoleFor(fT, f2, () => { const f6=f4==null?null:Z(f4.$0);let f7=bj.Create_1(f6==null?-8640000000000000:f6.$0);return new bY(f2, f7);}):f3===4?bU.GetOrAddHoleFor(fT, f2, () => new bZ(f2, bj.Create_1([]))):f3===5?bU.GetOrAddHoleFor(fT, f2, () => new b0(f2, bj.Create_1(Z(globalThis.document.querySelector("[ws-dom="+f2+"]"))))):f3===6?bU.GetOrAddHoleFor(fT, f2, () => { const f6=f4==null?null:Z(f4.$0);let f7=bj.Create_1(f6==null?[]:f6.$0);return new b1(f2, f7);}):e("Invalid value type");fW.set_Item(f2, f5);return Z(f5);} }, fV)), {$:0, $0:fW}];}
function s(fT, fU){ if(fT===fU)return true;else { const fV=typeof fT;if(fV=="object"){ if(fT===null||fT===void 0||fU===null||fU===void 0||!s(typeof fU, "object"))return false;else if("Equals"in fT)return fT.Equals(fU);else if("Equals"in fU)return false;else if(fT instanceof Array&&fU instanceof Array)return t(fT, fU);else if(fT instanceof Date&&fU instanceof Date)return u(fT, fU);else { const fW=[true];let fX;for(var fZ in fT)if(((f0) => { fW[0]=!fT.hasOwnProperty(f0)||fU.hasOwnProperty(f0)&&s(fT[f0], fU[f0]);return!fW[0];})(fZ))break;if(fW[0]){ let fY;for(var f0 in fU)if(((f1) => { fW[0]=!fU.hasOwnProperty(f1)||fT.hasOwnProperty(f1);return!fW[0];})(f0))break;} return fW[0];} } else return fV=="function"&&("$Func"in fT?fT.$Func===fU.$Func&&fT.$Target===fU.$Target:"$Invokes"in fT&&"$Invokes"in fU&&t(fT.$Invokes, fU.$Invokes));} }
function t(fT, fU){ let fV;let fW;if(m(fT)===m(fU)){ fV=true;fW=0;while(fV&&fW<m(fT)){!s(j(fT, fW), j(fU, fW))?fV=false:void 0;fW=fW+1;} return fV;} else return false;}
function u(fT, fU){ return fT.getTime()===fU.getTime();}
function v(fT){ const fU=typeof fT;return fU=="function"?0:fU=="boolean"?fT?1:0:fU=="number"?fT:fU=="string"?w(fT):fU=="object"?fT==null?0:fT instanceof Array?x(fT):y(fT):0;}
function w(fT){ let fU;if(fT===null)return 0;else { fU=5381;for(let fV=0, fW=fT.length-1;fV<=fW;fV++)fU=z(fU, fT[fV].charCodeAt());return fU;} }
function x(fT){ let fU=-34948909;for(let fV=0, fW=m(fT)-1;fV<=fW;fV++)fU=z(fU, v(j(fT, fV)));return fU;}
function y(fT){ if("GetHashCode"in fT)return fT.GetHashCode();else { const fU=[0];let fV;for(var fW in fT)if(((fX) => { fU[0]=z(z(fU[0], w(fX)), v(fT[fX]));return false;})(fW))break;return fU[0];} }
function z(fT, fU){ return(fT<<5)+fT+fU;}
function A(fT, fU){ if(fT===fU)return 0;else { const fV=typeof fT;switch(fV=="function"?1:fV=="boolean"?2:fV=="number"?2:fV=="string"?2:fV=="object"?3:0){ case 0:return typeof fU=="undefined"?0:-1;case 1:return e("Cannot compare function values.");case 2:return fT<fU?-1:1;case 3:if(fT===null)return -1;else if(fU===null)return 1;else if("CompareTo"in fT)return fT.CompareTo(fU);else if("CompareTo0"in fT)return fT.CompareTo0(fU);else if(fT instanceof Array&&fU instanceof Array)return B(fT, fU);else if(fT instanceof Date&&fU instanceof Date)return C(fT, fU);else { const fW=[0];let fX;for(var fZ in fT)if(((f0) =>!fT.hasOwnProperty(f0)?false:!fU.hasOwnProperty(f0)?(fW[0]=1,true):(fW[0]=A(fT[f0], fU[f0]),fW[0]!==0))(fZ))break;if(fW[0]===0){ let fY;for(var f0 in fU)if(((f1) =>!fU.hasOwnProperty(f1)?false:!fT.hasOwnProperty(f1)&&(fW[0]=-1,true))(f0))break;} return fW[0];} break;} } }
function B(fT, fU){ let fV;let fW;if(m(fT)<m(fU))return -1;else if(m(fT)>m(fU))return 1;else { fV=0;fW=0;while(fV===0&&fW<m(fT)){ fV=A(j(fT, fW), j(fU, fW));fW=fW+1;} return fV;} }
function C(fT, fU){ return A(fT.getTime(), fU.getTime());}
function D(fT){ u0030("index");return fT?u0031("index", Z("main"), fT):void 0;}
class E extends o { name;fillWith;get Name(){ return this.name;} get Value(){ return this.fillWith;} get AsChoiceView(){ return ei(this.fillWith);} constructor(fT, fU){ super();this.name=fT;this.fillWith=fU;} }
class F extends o { name;fillWith;get Name(){ return this.name;} ForTextView(){ return Z(this.fillWith);} get AsChoiceView(){ return ej(this.fillWith);} constructor(fT, fU){ super();this.name=fT;this.fillWith=fU;} }
let G=fN((fT) => class fU { static { G=fT(this);} static statusMessage;static { this.statusMessage=bj.Create_1("Click the button to keep the screen awake.");} });
function H(){ return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new RegExp("[xy]", "g"), (fT) => { const fU=Math.random()*16|0;const fV=fT=="x"?fU:fU&3|8;return fV.toString(16);});}
class I extends o { name;fillWith;get Name(){ return this.name;} get Value(){ return this.fillWith;} constructor(fT, fU){ super();this.name=fT;this.fillWith=fU;} }
function J(fT){ const fU={};const fV=cx(fT);try { while(fV.MoveNext()){ const fW=fV.Current;fU[fW[0]]=fW[1];} } finally { if(typeof fV=="object"&&a(fV))fV.Dispose();} return fU;}
function K(fT){ return(fU) => { try {(fT())(fU);} catch(fV){ fU.k(bl(fV));} };}
function L(fT, fU){ return O((fV) => { fT(bk((fW) => { if(fW.$==0){ const fX=fW.$0;S().Fork(() => { try {(fU(fX))(fV);} catch(fY){ fV.k(bl(fY));} });} else S().Fork(() => { fV.k(fW);});}, fV.ct));});}
function M(fT){ return(fU) => { fU.k(bm(fT));};}
function N(fT, fU){ const fV=(P())[0];const fW=fU==null?fV:fU.$0;S().Fork(() => { if(!fW.c)fT(bk((fX) => { if(fX.$==1)Q(fX.$0);}, fW));});}
function O(fT){ return(fU) => { if(fU.ct.c)R(fU);else fT(fU);};}
function P(){ return cv.defCTS;}
function Q(fT){ console.log("WebSharper: Uncaught asynchronous exception", fT);}
function R(fT){ fT.k(bn(new c4("New", fT.ct)));}
function S(){ return cv.scheduler;}
function T(fT){ return(fU) => { const fV=[false];const fW=(fX) => { if(fV[0])e("A continuation provided by Async.FromContinuations was invoked multiple times");else { fV[0]=true;S().Fork(fX);} };fT((fX) => { fW(() => { fU.k(bm(fX));});}, (fX) => { fW(() => { fU.k(bl(fX));});}, (fX) => { fW(() => { fU.k(bn(fX));});});};}
function U(){ return cv.Zero;}
function V(fT){ return T((fU, fV) => { fT.then(fU, (fW) => fV(W(fW)));});}
function W(fT){ return fT instanceof Error?fT:new cu(fT);}
function X(fT){ let fU=[];let fV;for(var fW in fT)fU.push(fT[fW]);return fU;}
class Y extends h { }
function Z(fT){ return{$:1, $0:fT};}
function u0030(fT){!u0032()?(u0033(true),u0034(globalThis.document.body, "")):void 0;u0035().set_Item(fT, u0036(""));}
function u0031(fT, fU, fV){ let fW;const fX=(fW=null,[u0036(fT).TryGetValue(fU==null?"":fU.$0, {get:() => fW, set:(fY) => { fW=fY;}}), fW]);return fX[0]?u0037(fX[1].cloneNode(true), fV):(console.warn("Local template doesn't exist", fU),bh.Empty);}
function u0032(){ return cC.LocalTemplatesLoaded;}
function u0033(fT){ cC.LocalTemplatesLoaded=fT;}
function u0034(fT, fU){ const fV=u0036(fU);const fW=new bi("New_5");const fX=fT.querySelectorAll("[ws-template]");for(let f9=0, f_=fX.length-1;f9<=f_;f9++){ const fY=fX[f9];const fZ=fY.getAttribute("ws-template").toLowerCase();fY.removeAttribute("ws-template");fW.set_Item(fZ, u0038(fY));} const f0=fT.querySelectorAll("[ws-children-template]");for(let f$=0, ga=f0.length-1;f$<=ga;f$++){ const f1=f0[f$];const f2=f1.getAttribute("ws-children-template").toLowerCase();f1.removeAttribute("ws-children-template");fW.set_Item(f2, u0039(f1));} const f3=fT.querySelectorAll("template[id]");for(let gb=0, gc=f3.length-1;gb<=gc;gb++){ const f4=f3[gb];fW.set_Item(f4.getAttribute("id").toLowerCase(), $(f4));} const f5=fT.querySelectorAll("template[name]");for(let gd=0, ge=f5.length-1;gd<=ge;gd++){ const f6=f5[gd];fW.set_Item(f6.getAttribute("name").toLowerCase(), $(f6));} const f7=new bp("New_3");function f8(gf){ if(!fV.ContainsKey(gf)){ let gg;const gh=(gg=null,[fW.TryGetValue(gf, {get:() => gg, set:(gi) => { gg=gi;}}), gg]);if(gh[0]){ f7.SAdd(gf);fW.RemoveKey(gf);ba(fU, Z(gf), gh[1], Z(f8));} else console.warn(f7.Contains(gf)?"Encountered loop when instantiating "+gf:"Local template does not exist: "+gf);} } while(fW.count>0)f8(br(fW.Keys));}
function u0035(){ return cC.LoadedTemplates;}
function u0036(fT){ let fU;const fV=(fU=null,[u0035().TryGetValue(fT, {get:() => fU, set:(fX) => { fU=fX;}}), fU]);if(fV[0])return fV[1];else { const fW=new bi("New_5");u0035().set_Item(fT, fW);return fW;} }
function u0037(fT, fU){ let fV;const fW=bb(fT, bq(fU, bc().Values));const fX=fW[1];const fY=fW[0];const fZ=fY.Els;return!s(fZ, null)&&fZ.length===1&&(j(fZ, 0)instanceof Node&&(s(j(fZ, 0).nodeType, Node.ELEMENT_NODE)&&(fV=j(fZ, 0),true)))?c6.TreeNode(fY, fX):bh.Mk(b2(fY), fX);}
function u0038(fT){ fT.removeAttribute("ws-template");const fU=fT.getAttribute("ws-replace");if(fU==null){ } else { fT.removeAttribute("ws-replace");const fV=fT.parentNode;if(s(fV, null)){ } else { const fW=globalThis.document.createElement(fT.tagName);fW.setAttribute("ws-replace", fU);fV.replaceChild(fW, fT);} } const fX=globalThis.document.createElement("div");fX.appendChild(fT);return fX;}
function u0039(fT){ const fU=globalThis.document.createElement("div");while(fT.hasChildNodes())fU.appendChild(fT.firstChild);return fU;}
function $(fT){ const fU=globalThis.document.createElement("div");const fV=fT.content;for(let fW=0, fX=fV.childNodes.length-1;fW<=fX;fW++)fU.appendChild(fV.childNodes[fW].cloneNode(true));return fU;}
function ba(fT, fU, fV, fW){ const fX=new bp("New_3");function fY(f5, f6){ while(true)switch(f5){ case 0:if(f6!==null){ const f7=f6.nextSibling;if(s(f6.nodeType, Node.TEXT_NODE))dd(f6);else if(s(f6.nodeType, Node.ELEMENT_NODE))f0(f6);f6=f7;} else return null;break;case 1:const f8=dl(f6.nodeName, Z(3), null).toLowerCase();const f9=f8.indexOf(".");const f_=f9===-1?[fT, f8]:[dl(f8, null, Z(f9-1)), dl(f8, Z(f9+1), null)];const f$=f_[1];const ga=f_[0];if(ga!=""&&!u0035().ContainsKey(ga))return de(f$);else { if(ga==""&&fW!=null)fW.$0(f$);const gb=u0035().Item(ga);if(!gb.ContainsKey(f$))return de(f$);else { const gc=gb.Item(f$);const gd=gc.cloneNode(true);const ge=new bp("New_3");const gf=new bi("New_5");const gg=f6.attributes;for(let gq=0, gr=gg.length-1;gq<=gr;gq++){ const gh=gg.item(gq).name.toLowerCase();const gi=gg.item(gq).nodeValue;let gj=gi==""?gh:gi.toLowerCase();gf.set_Item(gh, gj);if(!ge.SAdd(gh))console.warn("Hole mapped twice", gh);} for(let gs=0, gt=f6.childNodes.length-1;gs<=gt;gs++){ const gk=f6.childNodes[gs];if(s(gk.nodeType, Node.ELEMENT_NODE))if(!ge.SAdd(gk.nodeName.toLowerCase()))console.warn("Hole filled twice", f$);} const gl=f6.childNodes.length===1&&s(f6.firstChild.nodeType, Node.TEXT_NODE);if(gl){ const gm=df(gd, f6.firstChild.textContent, f$);const gn=((gu) =>(gv) => gu.SAdd(gv))(ge);let go=((gu) =>(gv) => { if(gv!=null)gu(gv.$0);})((gu) => { gn(gu);});go(gm);} dg(gd, ge);if(!gl){ for(let gu=0, gv=f6.childNodes.length-1;gu<=gv;gu++){ const gp=f6.childNodes[gu];if(s(gp.nodeType, Node.ELEMENT_NODE))if(gp.hasAttributes())dh(gd, gp);else fZ(gd, gp);} } di(gd, gf);dj(gd, f6.parentNode, f6);f6.parentNode.removeChild(f6);return;} } break;} } function fZ(f5, f6){ const f7=f6.nodeName.toLowerCase();const f8=(ga, gb) => { if(f7=="title"&&f6.hasChildNodes()){ const gc=dm(f6.textContent);f6.removeChild(f6.firstChild);while(gc.hasChildNodes())f6.appendChild(gc.firstChild);} f0(f6);return dj(f6, ga, gb);};bd(f5, "[ws-attr-holes]", (ga) => { const gb=em(ga.getAttribute("ws-attr-holes"), [" "], 1);for(let gf=0, gg=gb.length-1;gf<=gg;gf++){ const gc=j(gb, gf);let gd=new RegExp("\\${"+f7+"}", "ig");let ge=ga.getAttribute(gc).replace(gd, f6.textContent);ga.setAttribute(gc, ge);} });const f9=f5.querySelector("[ws-hole="+f7+"]");if(s(f9, null)){ const f_=f5.querySelector("[ws-replace="+f7+"]");if(s(f_, null)){ const f$=f5.querySelector("slot[name="+f7+"]");return f5.tagName.toLowerCase()=="template"?(f8(f$.parentNode, f$),void f$.parentNode.removeChild(f$)):null;} else { f8(f_.parentNode, f_);f_.parentNode.removeChild(f_);return;} } else { while(f9.hasChildNodes())f9.removeChild(f9.lastChild);f9.removeAttribute("ws-hole");return f8(f9, null);} } function f0(f5){ if(!f5.hasAttribute("ws-preserve"))if(en(f5.nodeName.toLowerCase(), "ws-"))f2(f5);else { dk(f5);f1(f5.firstChild);} } function f1(f5){ return fY(0, f5);} function f2(f5){ return fY(1, f5);} function f3(f5){ while(true){ const f6=f5.querySelector("[ws-template]");if(s(f6, null)){ const f7=f5.querySelector("[ws-children-template]");if(s(f7, null)){ const f8=f5.querySelectorAll("template[id]");for(let gc=1, gd=f8.length-1;gc<=gd;gc++){ const f9=f8[gc];if(fX.Contains(f9)){ } else { ba(fT, Z(f9.getAttribute("id")), f9, null);fX.SAdd(f9);} } const f_=f5.querySelectorAll("template[name]");for(let ge=1, gf=f_.length-1;ge<=gf;ge++){ const f$=f_[ge];if(fX.Contains(f$)){ } else { ba(fT, Z(f$.getAttribute("name")), f$, null);fX.SAdd(f$);} } return null;} else { const ga=f7.getAttribute("ws-children-template");f7.removeAttribute("ws-children-template");ba(fT, Z(ga), f7, null);f5=f5;} } else { const gb=f6.getAttribute("ws-template");(be(fT, Z(gb), f6))(null);f5=f5;} } } const f4=(fU==null?"":fU.$0).toLowerCase();u0036(fT).set_Item(f4, fV);if(fV.hasChildNodes()){ f3(fV);f1(fV.firstChild);} }
function bb(fT, fU){ let fV;const fW=[];const fX=[];const fY=[];const fZ=[];const f0=new bi("New_5");const f1=cx(fU);try { while(f1.MoveNext()){ const f2=f1.Current;f0.set_Item(f2.Name, f2);} } finally { if(typeof f1=="object"&&a(f1))f1.Dispose();} let f3=dn(fT);const f4=(gb, gc) => { const gd=dM(gb, gc);fX.push(dN(gd));fY.push([gb, gd]);const ge=fO(gd.OnAfterRender);if(ge==null)return null;else { const gf=ge.$0;fZ.push(() => { gf(gb);});return;} };const f5=(gb) => { let gc;const gd=(gc=null,[f0.TryGetValue(gb, {get:() => gc, set:(gg) => { gc=gg;}}), gc]);if(gd[0]){ const ge=gd[1];if(ge instanceof d3)return Z(ge.Value);else if(ge instanceof E)return Z(bh.TextNode(ge.Value));else { const gf=ge.ForTextView();return gf==null?null:Z(bh.TextView(gf.$0));} } else return null;};bd(fT, "[ws-hole]", (gb) => { const gc=gb.getAttribute("ws-hole");gb.removeAttribute("ws-hole");while(gb.hasChildNodes())gb.removeChild(gb.lastChild);const gd=f5(gc);if(gd!=null&&gd.$==1){ const ge=gd.$0;cD(gb, ge.docNode);fW.push(cX.New(dO(gb), ge.docNode, null, gb, cY(), null));fX.push(ge.updates);} });bd(fT, "[ws-replace]", (gb) => { const gc=f5(gb.getAttribute("ws-replace"));if(gc!=null&&gc.$==1){ const gd=gc.$0;const ge=gb.parentNode;const gf=globalThis.document.createTextNode("");ge.replaceChild(gf, gb);const gg=cI(gf, gd.docNode);f3=dn(fT);const gh=bG((gi) => gb===gi, f3);if(gh==null){ } else k(f3, gh.$0, gd.docNode);fW.push(cX.New(dO(ge), gd.docNode, Z([gg, gf]), ge, cY(), null));fX.push(gd.updates);} });let f6=false;bd(fT, "slot", (gb) => { const gc=gb.getAttribute("name");const gd=gc==""||gc==null?"default":gc.toLowerCase();if(f6&&gd=="default"||!s(fT.parentElement, null)){ } else { while(gb.hasChildNodes())gb.removeChild(gb.lastChild);if(gd=="default")f6=true;const ge=f5(gd);if(ge!=null&&ge.$==1){ const gf=ge.$0;cD(gb, gf.docNode);fW.push(cX.New(dO(gb), gf.docNode, null, gb, cY(), null));fX.push(gf.updates);} } });bd(fT, "[ws-attr]", (gb) => { let gc;const gd=gb.getAttribute("ws-attr");gb.removeAttribute("ws-attr");const ge=(gc=null,[f0.TryGetValue(gd, {get:() => gc, set:(gg) => { gc=gg;}}), gc]);if(ge[0]){ const gf=ge[1];if(gf instanceof d4)f4(gb, gf.Value);else console.warn("Attribute hole filled with non-attribute data", gd);} });bd(fT, "[ws-on]", (gb) => { f4(gb, ef.Concat(bF((gc) => { let gd;const ge=em(gc, [":"], 1);const gf=(gd=null,[f0.TryGetValue(j(ge, 1), {get:() => gd, set:(gh) => { gd=gh;}}), gd]);if(gf[0]){ const gg=gf[1];return gg instanceof d5?Z(d6(j(ge, 0), gg.Value)):gg instanceof I?Z(ef.Handler(j(ge, 0), gg.Value)):(console.warn("Event hole on"+j(ge, 0)+" filled with non-event data", j(ge, 1)),null);} else return null;}, em(gb.getAttribute("ws-on"), [" "], 1))));gb.removeAttribute("ws-on");});bd(fT, "[ws-onafterrender]", (gb) => { let gc;const gd=gb.getAttribute("ws-onafterrender");const ge=(gc=null,[f0.TryGetValue(gd, {get:() => gc, set:(gg) => { gc=gg;}}), gc]);if(ge[0]){ const gf=ge[1];if(gf instanceof eg){ gb.removeAttribute("ws-onafterrender");f4(gb, d7(gf.Value));} else if(gf instanceof eh){ gb.removeAttribute("ws-onafterrender");f4(gb, d7(gf.Value));} else console.warn("onafterrender hole filled with non-onafterrender data", gd);} });bd(fT, "[ws-var]", (gb) => { let gc;const gd=gb.getAttribute("ws-var");gb.removeAttribute("ws-var");const ge=(gc=null,[f0.TryGetValue(gd, {get:() => gc, set:(gf) => { gc=gf;}}), gc]);if(ge[0])ge[1].AddAttribute((gf) =>(gg) => f4(gf, gg), gb);});const f7=() => { bf("[ws-dom]", (gb) => { let gc;let gd;let ge;const gf=(gc=null,[f0.TryGetValue(gb.getAttribute("ws-dom").toLowerCase(), {get:() => gc, set:(gj) => { gc=gj;}}), gc]);if(gf[0]){ const gg=gf[1];if(gg instanceof b0){ const gh=gg.Value;gb.removeAttribute("ws-dom");gd=gb;const gi=new MutationObserver((gj, gk) => { bK((gl) => { gl.removedNodes.forEach(fP((gm) => gm[0]===gd&&gl.addedNodes.length!==1?(gh.SetFinal(null),gk.disconnect()):null), null);}, gj);});if(gb.parentElement!==null)gi.observe(gb.parentElement, (ge={},ge.childList=true,ge));gh.Set(Z(gb));c8((gj) => { if(gj!=null&&gj.$==1){ const gk=gj.$0;if(gd===gk){ } else { gd.replaceWith(gk);gd=gk;} } else { gd.remove();gi.disconnect();} }, gh.View);} } });};bd(fT, "[ws-attr-holes]", (gb) => { const gc=new RegExp(bg(), "g");const gd=em(gb.getAttribute("ws-attr-holes"), [" "], 1);gb.removeAttribute("ws-attr-holes");for(let ge=0, gf=gd.length-1;ge<=gf;ge++)((() => { let gg;const gh=j(gd, ge);const gi=gb.getAttribute(gh);let gj=null;let gk=0;const gl=[];while(gj=gc.exec(gi),gj!==null){ const gm=dl(gi, Z(gk), Z(gc.lastIndex-j(gj, 0).length-1));gk=gc.lastIndex;gl.push([gm, j(gj, 1)]);} const gn=dl(gi, Z(gk), null);gc.lastIndex=0;const go=bL((gt, gu) =>(((gv) => { const gw=gv[0];const gx=gv[1];return(gy) => { let gz;const gA=gy[0];const gB=gy[1];const gC=(gz=null,[f0.TryGetValue(gx, {get:() => gz, set:(gE) => { gz=gE;}}), gz]);const gD=gC[0]?gC[1].AsChoiceView:ei("");return gD.$==1?[gw, ek.Cons(gA==""?gD.$0:c9((gE) => gE+gA, gD.$0), gB)]:[gw+gD.$0+gA, gB];};})(gt))(gu), gl, [gn, ek.Empty]);if(go[1].$==1){ if(go[1].$1.$==1){ if(go[1].$1.$1.$==1){ if(go[1].$1.$1.$1.$==0){ const gp=go[0];gg=d8(gh, c_((gt, gu, gv) => gp+gt+gu+gv, go[1].$0, go[1].$1.$0, go[1].$1.$1.$0));} else { const gq=go[0];gg=d8(gh, c9((gt) => gq+el("", gt), c$(go[1])));} } else { const gr=go[0];gg=d8(gh, da((gt, gu) => gr+gt+gu, go[1].$0, go[1].$1.$0));} } else if(go[0]=="")gg=d8(gh, go[1].$0);else { const gs=go[0];gg=d8(gh, c9((gt) => gs+gt, go[1].$0));} } else gg=ef.Create(gh, go[0]);return f4(gb, gg);})());});let f8=f3;const f9=fZ.length==0?Z(() => { f7();}):Z((gb) => { f7();bK((gc) => { gc(gb);}, fZ);});const f_=!s(f3, null)&&f3.length===1&&(j(f3, 0)instanceof Node&&(j(f3, 0)instanceof Element&&(fV=j(f3, 0),true)))?Z(fV):null;let f$={Els:f8, Dirty:true, Holes:fW, Attrs:fY, Render:f9?f9.$0:void 0, El:f_?f_.$0:void 0};let ga=fQ(f$, ["Render", "El"]);return[ga, et(c7(), db, fX)];}
function bc(){ return cC.GlobalHoles;}
function bd(fT, fU, fV){ dt(fT, fU, (fW) => { if(fW.closest("[ws-preserve]")==null)fV(fW);});}
function be(fT, fU, fV){ const fW=u0038(fV);return(fX) => { ba(fT, fU, fW, fX);};}
function bf(fT, fU){ du(fT, (fV) => { if(fV.closest("[ws-preserve]")==null)fU(fV);});}
function bg(){ return cC.TextHoleRE;}
class bh extends h { docNode;updates;static RunById(fT, fU){ const fV=globalThis.document.getElementById(fT);if(s(fV, null))e("invalid id: "+fT);else bh.Run(fV, fU);} static Run(fT, fU){ cD(fT, fU.docNode);bh.RunInPlace(false, fT, fU);} static get Empty(){ return bh.Mk(null, c7());} static RunInPlace(fT, fU, fV){ const fW=cF(fU, fV.docNode);c8(dB()||dI()?dJ(cG(fT, fW, fV.docNode)):() => { cH(fT, fW, fV.docNode);}, fV.updates);} static Mk(fT, fU){ return new bh(fT, fU);} static TextNode(fT){ return bh.Mk(b3(globalThis.document.createTextNode(fT)), c7());} static TextView(fT){ const fU=cQ();return bh.Mk(b4(fU), c9((fV) => { cR(fU, fV);}, fT));} constructor(fT, fU){ super();this.docNode=fT;this.updates=fU;} }
class bi extends h { equals;hash;count;data;set_Item(fT, fU){ this.set(fT, fU);} set(fT, fU){ const fV=this.hash(fT);const fW=this.data[fV];if(fW==null){ this.count=this.count+1;this.data[fV]=new Array({K:fT, V:fU});} else { const fX=bG((fY) => this.equals.apply(null, [(f(fY))[0], fT]), fW);if(fX==null){ this.count=this.count+1;fW.push({K:fT, V:fU});} else fW[fX.$0]={K:fT, V:fU};} } TryGetValue(fT, fU){ const fV=this.data[this.hash(fT)];if(fV==null)return false;else { const fW=bH((fX) => { const fY=f(fX);return this.equals.apply(null, [fY[0], fT])?Z(fY[1]):null;}, fV);return fW!=null&&fW.$==1&&(fU.set(fW.$0),true);} } ContainsKey(fT){ const fU=this.data[this.hash(fT)];return fU==null?false:bI((fV) => this.equals.apply(null, [(f(fV))[0], fT]), fU);} RemoveKey(fT){ return this.remove(fT);} get Keys(){ return new dA(this);} GetEnumerator(){ return cA(bJ(X(this.data)));} get Values(){ return new ex(this);} remove(fT){ const fU=this.hash(fT);const fV=this.data[fU];if(fV==null)return false;else { const fW=bN((fX) =>!this.equals.apply(null, [(f(fX))[0], fT]), fV);return m(fW)<fV.length&&(this.count=this.count-1,this.data[fU]=fW,true);} } Item(fT){ return this.get(fT);} get(fT){ const fU=this.data[this.hash(fT)];return fU==null?cw():bP((fV) => { const fW=f(fV);return this.equals.apply(null, [fW[0], fT])?Z(fW[1]):null;}, fU);} static New_5(){ return new this("New_5");} static New_6(fT, fU, fV){ return new this("New_6", fT, fU, fV);} constructor(fT, fU, fV, fW){ if(fT=="New_5"){ fT="New_6";fU=[];fV=s;fW=v;} if(fT=="New_6"){ const fX=fU;const fY=fV;const fZ=fW;super();this.equals=fY;this.hash=fZ;this.count=0;this.data=[];const f0=cx(fX);try { while(f0.MoveNext()){ const f1=f0.Current;this.set(f1.K, f1.V);} } finally { if(typeof f0=="object"&&a(f0))f0.Dispose();} } } }
let bj=fN((fT) => class fU extends h { static { bj=fT(this);} static Create_1(fV){ return new b7(false, {s:c1(fV, [])}, fV);} static { } });
function bk(fT, fU){ return{k:fT, ct:fU};}
function bl(fT){ return{$:1, $0:fT};}
function bm(fT){ return{$:0, $0:fT};}
function bn(fT){ return{$:2, $0:fT};}
function bo(fT, fU){ return{c:fT, r:fU};}
class bp extends h { equals;hash;data;count;SAdd(fT){ return this.add(fT);} Contains(fT){ const fU=this.data[this.hash(fT)];return fU==null?false:this.arrContains(fT, fU);} add(fT){ const fU=this.hash(fT);const fV=this.data[fU];return fV==null?(this.data[fU]=[fT],this.count=this.count+1,true):this.arrContains(fT, fV)?false:(fV.push(fT),this.count=this.count+1,true);} arrContains(fT, fU){ let fV=true;let fW=0;const fX=fU.length;while(fV&&fW<fX)if(this.equals.apply(null, [fU[fW], fT]))fV=false;else fW=fW+1;return!fV;} GetEnumerator(){ return cx(eP(this.data));} ExceptWith(fT){ const fU=cx(fT);try { while(fU.MoveNext())this.Remove(fU.Current);} finally { if(typeof fU=="object"&&a(fU))fU.Dispose();} } get Count(){ return this.count;} IntersectWith(fT){ const fU=new bp("New_4", fT, this.equals, this.hash);const fV=eP(this.data);for(let fX=0, fY=fV.length-1;fX<=fY;fX++){ const fW=fV[fX];if(!fU.Contains(fW))this.Remove(fW);} } Remove(fT){ const fU=this.data[this.hash(fT)];return fU==null?false:this.arrRemove(fT, fU)&&(this.count=this.count-1,true);} CopyTo(fT, fU){ const fV=eP(this.data);for(let fW=0, fX=fV.length-1;fW<=fX;fW++)k(fT, fW+fU, fV[fW]);} arrRemove(fT, fU){ let fV=true;let fW=0;const fX=fU.length;while(fV&&fW<fX)if(this.equals.apply(null, [fU[fW], fT])){ fU.splice(fW, 1);fV=false;} else fW=fW+1;return!fV;} static New_3(){ return new this("New_3");} static New_4(fT, fU, fV){ return new this("New_4", fT, fU, fV);} static New_2(fT){ return new this("New_2", fT);} constructor(fT, fU, fV, fW){ if(fT=="New_3"){ fT="New_4";fU=[];fV=s;fW=v;} let fX;if(fT=="New_2"){ fX=fU;fT="New_4";fU=fX;fV=s;fW=v;} if(fT=="New_4"){ const fY=fU;const fZ=fV;const f0=fW;super();this.equals=fZ;this.hash=f0;this.data=[];this.count=0;const f1=cx(fY);try { while(f1.MoveNext())this.add(f1.Current);} finally { if(typeof f1=="object"&&a(f1))f1.Dispose();} } } }
function bq(fT, fU){ return{GetEnumerator:() => { const fV=cx(fT);const fW=[true];return new cB(fV, null, (fX) => { if(fX.s.MoveNext()){ fX.c=fX.s.Current;return true;} else { const fY=fX.s;if(!s(fY, null))fY.Dispose();fX.s=null;return fW[0]&&(fW[0]=false,fX.s=cx(fU),fX.s.MoveNext()?(fX.c=fX.s.Current,true):(fX.s.Dispose(),fX.s=null,false));} }, (fX) => { const fY=fX.s;if(!s(fY, null))fY.Dispose();});}};}
function br(fT){ const fU=cx(fT);try { return fU.MoveNext()?fU.Current:dx();} finally { if(typeof fU=="object"&&a(fU))fU.Dispose();} }
function bs(fT, fU, fV){ let fW=fU;const fX=cx(fV);try { while(fX.MoveNext())fW=fT(fW, fX.Current);return fW;} finally { if(typeof fX=="object"&&a(fX))fX.Dispose();} }
function bt(fT, fU){ const fV=cx(fU);try { while(fV.MoveNext())fT(fV.Current);} finally { if(typeof fV=="object"&&a(fV))fV.Dispose();} }
function bu(fT, fU){ return{GetEnumerator:() => { const fV=cx(fU);return new cB(null, null, (fW) => fV.MoveNext()&&(fW.c=fT(fV.Current),true), () => { fV.Dispose();});}};}
function bv(fT){ return{GetEnumerator:() => cx(fT())};}
function bw(fT, fU){ return by(bu(fT, fU));}
function bx(fT){ const fU=cx(fT);try { if(!fU.MoveNext())bA();let fV=fU.Current;while(fU.MoveNext()){ const fW=fU.Current;if(A(fW, fV)===1)fV=fW;} return fV;} finally { if(typeof fU=="object"&&a(fU))fU.Dispose();} }
function by(fT){ return{GetEnumerator:() => { const fU=cx(fT);function fV(fW){ while(true){ const fX=fW.s;if(s(fX, null)){ if(fU.MoveNext()){ fW.s=cx(fU.Current);fW=fW;} else { fU.Dispose();return false;} } else if(fX.MoveNext()){ fW.c=fX.Current;return true;} else { fW.Dispose();fW.s=null;fW=fW;} } } return new cB(null, null, fV, (fW) => { const fX=fW.s;if(!s(fX, null))fX.Dispose();if(!s(fU, null))fU.Dispose();});}};}
function bz(fT, fU){ return bB(fT, bC(fU));}
function bA(){ return e("The input sequence was empty.");}
function bB(fT, fU){ fT<0?dz():void 0;return{GetEnumerator:() => { const fV=[cx(fU)];return new cB(0, null, (fW) => { fW.s=fW.s+1;if(fW.s>fT)return false;else { const fX=fV[0];return s(fX, null)?dx():fX.MoveNext()?(fW.c=fX.Current,fW.s===fT?(fX.Dispose(),fV[0]=null):void 0,true):(fX.Dispose(),fV[0]=null,dx());} }, () => { const fW=fV[0];if(!s(fW, null))fW.Dispose();});}};}
function bC(fT){ return{GetEnumerator:() => new cB(0, null, (fU) => { fU.c=fT(fU.s);fU.s=fU.s+1;return true;}, void 0)};}
function bD(fT, fU){ return!bE((fV) =>!fT(fV), fU);}
function bE(fT, fU){ const fV=cx(fU);try { let fW=false;while(!fW&&fV.MoveNext())fW=fT(fV.Current);return fW;} finally { if(typeof fV=="object"&&a(fV))fV.Dispose();} }
function bF(fT, fU){ const fV=[];for(let fX=0, fY=fU.length-1;fX<=fY;fX++){ const fW=fT(fU[fX]);if(fW==null){ } else fV.push(fW.$0);} return fV;}
function bG(fT, fU){ let fV=null;let fW=0;while(fW<fU.length&&fV==null){ fT(fU[fW])?fV=Z(fW):void 0;fW=fW+1;} return fV;}
function bH(fT, fU){ let fV=null;let fW=0;while(fW<fU.length&&fV==null){ const fX=fT(fU[fW]);if(fX!=null&&fX.$==1)fV=fX;fW=fW+1;} return fV;}
function bI(fT, fU){ let fV=false;let fW=0;while(!fV&&fW<m(fU))if(fT(fU[fW]))fV=true;else fW=fW+1;return fV;}
function bJ(fT){ return Array.prototype.concat.apply([], bO(fT));}
function bK(fT, fU){ for(let fV=0, fW=fU.length-1;fV<=fW;fV++)fT(fU[fV]);}
function bL(fT, fU, fV){ let fW=fV;const fX=fU.length;for(let fY=1, fZ=fX;fY<=fZ;fY++)fW=fT(fU[fX-fY], fW);return fW;}
function bM(fT, fU){ const fV=new Array(fU.length);for(let fW=0, fX=fU.length-1;fW<=fX;fW++)fV[fW]=fT(fU[fW]);return fV;}
function bN(fT, fU){ const fV=[];for(let fW=0, fX=fU.length-1;fW<=fX;fW++)if(fT(fU[fW]))fV.push(fU[fW]);return fV;}
function bO(fT){ if(fT instanceof Array)return fT.slice();else if(fT instanceof ek)return bQ(fT);else { const fU=[];const fV=cx(fT);try { while(fV.MoveNext())fU.push(fV.Current);return fU;} finally { if(typeof fV=="object"&&a(fV))fV.Dispose();} } }
function bP(fT, fU){ const fV=bH(fT, fU);return fV==null?e("KeyNotFoundException"):fV.$0;}
function bQ(fT){ const fU=[];let fV=fT;while(!(fV.$==0)){ fU.push(e5(fV));fV=e6(fV);} return fU;}
function bR(fT, fU){ let fV=true;let fW=0;while(fV&&fW<m(fU))if(fT(fU[fW]))fW=fW+1;else fV=false;return fV;}
function bS(fT, fU){ const fV=new Array(fT);for(let fW=0, fX=fT-1;fW<=fX;fW++)fV[fW]=fU;return fV;}
function bT(fT, fU){ if(fT<0)e("Negative size given.");else null;const fV=new Array(fT);for(let fW=0, fX=fT-1;fW<=fX;fW++)fV[fW]=fU(fW);return fV;}
let bU=fN((fT) => class fU extends h { static { bU=fT(this);} static init;id;vars;static initialized;static instances;static GetOrAddHoleFor(fV, fW, fX){ let fY;const fZ=bU.GetHolesFor(fV);const f0=(fY=null,[fZ.TryGetValue(fW, {get:() => fY, set:(f2) => { fY=f2;}}), fY]);if(f0[0])return f0[1];else { const f1=fX();fZ.set_Item(fW, f1);return f1;} } static GetHolesFor(fV){ let fW;const fX=(fW=null,[bU.initialized.TryGetValue(fV, {get:() => fW, set:(fZ) => { fW=fZ;}}), fW]);if(fX[0])return fX[1];else { const fY=new bi("New_5");bU.initialized.set_Item(fV, fY);return fY;} } static { bU.initialized=new bi("New_5");bU.instances=new bi("New_5");} });
class bV extends o { name;fillWith;get Name(){ return this.name;} ForTextView(){ return Z(this.fillWith.View);} AddAttribute(fT, fU){(fT(fU))(d9(this.fillWith));} get AsChoiceView(){ return ej(c9(String, this.fillWith.View));} constructor(fT, fU){ super();this.name=fT;this.fillWith=fU;} }
class bW extends o { name;fillWith;get Name(){ return this.name;} ForTextView(){ return Z(c9(String, this.fillWith.View));} AddAttribute(fT, fU){(fT(fU))(d_(this.fillWith));} get AsChoiceView(){ return ej(c9(String, this.fillWith.View));} constructor(fT, fU){ super();this.name=fT;this.fillWith=fU;} }
class bX extends o { name;fillWith;get Name(){ return this.name;} ForTextView(){ return Z(c9(String, this.fillWith.View));} AddAttribute(fT, fU){(fT(fU))(d$(this.fillWith));} get AsChoiceView(){ return ej(c9(String, this.fillWith.View));} constructor(fT, fU){ super();this.name=fT;this.fillWith=fU;} }
class bY extends o { name;fillWith;get Name(){ return this.name;} ForTextView(){ return Z(c9((fT) =>(new Date(fT)).toLocaleString(), this.fillWith.View));} AddAttribute(fT, fU){(fT(fU))(ea(this.fillWith));} get AsChoiceView(){ return ej(c9((fT) =>(new Date(fT)).toLocaleString(), this.fillWith.View));} constructor(fT, fU){ super();this.name=fT;this.fillWith=fU;} }
class bZ extends o { name;fillWith;get Name(){ return this.name;} ForTextView(){ return Z(c9(String, this.fillWith.View));} AddAttribute(fT, fU){(fT(fU))(eb(this.fillWith));} get AsChoiceView(){ return ej(c9(String, this.fillWith.View));} constructor(fT, fU){ super();this.name=fT;this.fillWith=fU;} }
class b0 extends o { name;fillWith;get Name(){ return this.name;} get Value(){ return this.fillWith;} constructor(fT, fU){ super();this.name=fT;this.fillWith=fU;} }
class b1 extends o { name;fillWith;get Name(){ return this.name;} ForTextView(){ return Z(c9((fT) => el(",", fT), this.fillWith.View));} AddAttribute(fT, fU){(fT(fU))(ec(this.fillWith));} get AsChoiceView(){ return ej(c9(String, this.fillWith.View));} constructor(fT, fU){ super();this.name=fT;this.fillWith=fU;} }
function b2(fT){ return{$:6, $0:fT};}
function b3(fT){ return{$:5, $0:fT};}
function b4(fT){ return{$:4, $0:fT};}
class b5 { }
function b6(fT, fU){ return fD(fT, -2147483648, 2147483647, fU);}
class b7 extends p { isConst;current;snap;view;id;get View(){ return this.view;} Set(fT){ if(this.isConst)(((fU) => fU("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal"))((fU) => { console.log(fU);}));else { dL(this.snap);this.current=fT;this.snap={s:c1(fT, [])};} } SetFinal(fT){ if(this.isConst)(((fU) => fU("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal"))((fU) => { console.log(fU);}));else { dL(this.snap);this.isConst=true;this.current=fT;this.snap={s:c2(fT)};} } Get(){ return this.current;} UpdateMaybe(fT){ const fU=fT(this.Get());if(fU!=null&&fU.$==1)this.Set(fU.$0);} constructor(fT, fU, fV){ super();this.isConst=fT;this.current=fV;this.snap=fU;this.view=() => this.snap;this.id=cY();} }
function b8(fT, fU, fV){ const fW=fT.s;if(fW==null)fV();else fW!=null&&fW.$==2?(fW.$1.push(fV),fU(fW.$0)):fW!=null&&fW.$==3?(fW.$0.push(fU),fW.$1.push(fV)):fU(fW.$0);}
function b9(fT, fU){ const fV=fU.s;if(fV!=null&&fV.$==0)return{s:c2(fT(fV.$0))};else { const fW={s:c3([], [])};ce(fU, (fX) => { cf(fW, fU, fT(fX));}, fW);return fW;} }
function b_(fT, fU, fV, fW){ const fX=fU.s;const fY=fV.s;const fZ=fW.s;if(fX!=null&&fX.$==0)return fY!=null&&fY.$==0?fZ!=null&&fZ.$==0?{s:c2(fT(fX.$0, fY.$0, fZ.$0))}:cg(fT, fX.$0, fY.$0, fW):fZ!=null&&fZ.$==0?ch(fT, fX.$0, fZ.$0, fV):ci(fT, fX.$0, fV, fW);else if(fY!=null&&fY.$==0)return fZ!=null&&fZ.$==0?cj(fT, fY.$0, fZ.$0, fU):ck(fT, fY.$0, fU, fW);else if(fZ!=null&&fZ.$==0)return cl(fT, fZ.$0, fU, fV);else { const f0={s:c3([], [])};const f1=() => { const f2=f0.s;if(!(f2!=null&&f2.$==0||f2!=null&&f2.$==2)){ const f3=cm(fU);const f4=cm(fV);const f5=cm(fW);if(f3!=null&&f3.$==1)if(f4!=null&&f4.$==1)if(f5!=null&&f5.$==1)if(f3.$0[1]&&f4.$0[1]&&f5.$0[1])cn(f0, fT(f3.$0[0], f4.$0[0], f5.$0[0]));else co(f0, fT(f3.$0[0], f4.$0[0], f5.$0[0]));} };ce(fU, f1, f0);ce(fV, f1, f0);ce(fW, f1, f0);return f0;} }
function b$(fT){ const fU=bO(fT);if(fU.length==0)return{s:c2([])};else { const fV={s:c3([], [])};const fW=[m(fU)-1];const fX=() => { if(fW[0]===0){ const fY=bM((fZ) => { const f0=fZ.s;return f0!=null&&f0.$==0?f0.$0:f0!=null&&f0.$==2?f0.$0:e("value not found by View.Sequence");}, fU);if(bR((fZ) => { const f0=fZ.s;return f0!=null&&f0.$==0;}, fU))cn(fV, fY);else co(fV, fY);} else fW[0]=fW[0]-1;};bK((fY) => { ce(fY, fX, fV);}, fU);return fV;} }
function ca(fT, fU, fV){ const fW=fU.s;const fX=fV.s;if(fW!=null&&fW.$==0)return fX!=null&&fX.$==0?{s:c2(fT(fW.$0, fX.$0))}:cp(fT, fW.$0, fV);else if(fX!=null&&fX.$==0)return cq(fT, fX.$0, fU);else { const fY={s:c3([], [])};const fZ=() => { const f0=fY.s;if(!(f0!=null&&f0.$==0||f0!=null&&f0.$==2)){ const f1=cm(fU);const f2=cm(fV);if(f1!=null&&f1.$==1)if(f2!=null&&f2.$==1)if(f1.$0[1]&&f2.$0[1])cn(fY, fT(f1.$0[0], f2.$0[0]));else co(fY, fT(f1.$0[0], f2.$0[0]));} };ce(fU, fZ, fY);ce(fV, fZ, fY);return fY;} }
function cb(fT, fU){ const fV=fT.s;const fW=fU.s;if(fV!=null&&fV.$==0)return fW!=null&&fW.$==0?{s:c2(null)}:fU;else if(fW!=null&&fW.$==0)return fT;else { const fX={s:c3([], [])};const fY=() => { const fZ=fX.s;if(!(fZ!=null&&fZ.$==0||fZ!=null&&fZ.$==2)){ const f0=cm(fT);const f1=cm(fU);if(f0!=null&&f0.$==1)if(f1!=null&&f1.$==1)if(f0.$0[1]&&f1.$0[1])cn(fX, null);else co(fX, null);} };ce(fT, fY, fX);ce(fU, fY, fX);return fX;} }
function cc(fT){ const fU=fT.s;if(fU==null)return fT;else if(fU!=null&&fU.$==2){ const fV={s:c1(fU.$0, [])};cr(fT, fV);return fV;} else if(fU!=null&&fU.$==3){ const fW={s:c3([], [])};ce(fT, (fX) => { cf(fW, fT, fX);}, fW);return fW;} else return fT;}
function cd(fT, fU){ const fV=fT.s;if(fV==null)fU();else fV!=null&&fV.$==2?fV.$1.push(fU):fV!=null&&fV.$==3?fV.$1.push(fU):void 0;}
function ce(fT, fU, fV){ const fW=fT.s;if(fW==null)dL(fV);else fW!=null&&fW.$==2?(cs(fW.$1, fV),fU(fW.$0)):fW!=null&&fW.$==3?(fW.$0.push(fU),cs(fW.$1, fV)):fU(fW.$0);}
function cf(fT, fU, fV){ const fW=fU.s;if(fW!=null&&fW.$==0)cn(fT, fV);else co(fT, fV);}
function cg(fT, fU, fV, fW){ return b9((fX) => fT(fU, fV, fX), fW);}
function ch(fT, fU, fV, fW){ return b9((fX) => fT(fU, fX, fV), fW);}
function ci(fT, fU, fV, fW){ return ca((fX, fY) => fT(fU, fX, fY), fV, fW);}
function cj(fT, fU, fV, fW){ return b9((fX) => fT(fX, fU, fV), fW);}
function ck(fT, fU, fV, fW){ return ca((fX, fY) => fT(fX, fU, fY), fV, fW);}
function cl(fT, fU, fV, fW){ return ca((fX, fY) => fT(fX, fY, fU), fV, fW);}
function cm(fT){ const fU=fT.s;return fU!=null&&fU.$==0?Z([fU.$0, true]):fU!=null&&fU.$==2?Z([fU.$0, false]):null;}
function cn(fT, fU){ const fV=fT.s;if(fV!=null&&fV.$==3){ fT.s=c2(fU);const fW=fV.$0;for(let fX=0, fY=m(fW)-1;fX<=fY;fX++)(j(fW, fX))(fU);} else void 0;}
function co(fT, fU){ const fV=fT.s;if(fV!=null&&fV.$==3){ fT.s=c1(fU, fV.$1);const fW=fV.$0;for(let fX=0, fY=m(fW)-1;fX<=fY;fX++)(j(fW, fX))(fU);} else void 0;}
function cp(fT, fU, fV){ return b9((fW) => fT(fU, fW), fV);}
function cq(fT, fU, fV){ return b9((fW) => fT(fW, fU), fV);}
function cr(fT, fU){ const fV=fT.s;if(fV==null)dL(fU);else fV!=null&&fV.$==2?cs(fV.$1, fU):fV!=null&&fV.$==3?cs(fV.$1, fU):void 0;}
function cs(fT, fU){ fT.push(fU);if(fT.length%20===0){ const fV=fT.slice(0);fI(fT);for(let fX=0, fY=m(fV)-1;fX<=fY;fX++){ const fW=j(fV, fX);if(typeof fW=="object")(((fZ) => { if(fZ.s)fT.push(fZ);})(fW));else(((fZ) => { fT.push(fZ);})(fW));} } else void 0;}
class ct extends h { idle;robin;Fork(fT){ this.robin.push(fT);this.idle?(this.idle=false,setTimeout(() => { this.tick();}, 0)):void 0;} tick(){ const fT=Date.now();let fU=true;while(fU)if(this.robin.length===0){ this.idle=true;fU=false;} else {(this.robin.shift())();Date.now()-fT>40?(setTimeout(() => { this.tick();}, 0),fU=false):void 0;} } constructor(){ super();this.idle=true;this.robin=[];} }
class cu extends Error { reason;constructor(fT){ super("Promise rejected");this.reason=fT;} }
let cv=fN((fT) => class fU { static { cv=fT(this);} static GetCT;static Zero;static defCTS;static scheduler;static noneCT;static { this.noneCT=bo(false, []);this.scheduler=new ct();this.defCTS=[new c5()];this.Zero=M();this.GetCT=(fV) => { fV.k(bm(fV.ct));};} });
function cw(){ throw new eY("New");}
function cx(fT){ return fT instanceof Array?cy(fT):s(typeof fT, "string")?cz(fT):fT.GetEnumerator();}
function cy(fT){ return new cB(0, null, (fU) => { const fV=fU.s;return fV<m(fT)&&(fU.c=j(fT, fV),fU.s=fV+1,true);}, void 0);}
function cz(fT){ return new cB(0, null, (fU) => { const fV=fU.s;return fV<fT.length&&(fU.c=fT[fV],fU.s=fV+1,true);}, void 0);}
function cA(fT){ return fT instanceof Array?cy(fT):s(typeof fT, "string")?cz(fT):"GetEnumerator0"in fT?fT.GetEnumerator0():fT.GetEnumerator();}
class cB extends h { s;c;n;d;e;MoveNext(){ const fT=this.n(this);this.e=fT?1:2;return fT;} get Current(){ return this.e===1?this.c:this.e===0?e("Enumeration has not started. Call MoveNext."):e("Enumeration already finished.");} Dispose(){ if(this.d)this.d(this);} constructor(fT, fU, fV, fW){ super();this.s=fT;this.c=fU;this.n=fV;this.d=fW;this.e=0;} }
let cC=fN((fT) => class fU { static { cC=fT(this);} static RenderedFullDocTemplate;static TextHoleRE;static GlobalHoles;static LocalTemplatesLoaded;static LoadedTemplates;static { this.LoadedTemplates=new bi("New_5");this.LocalTemplatesLoaded=false;this.GlobalHoles=new bi("New_5");this.TextHoleRE="\\${([^}]+)}";this.RenderedFullDocTemplate=null;} });
function cD(fT, fU){ cE(fT, fU, null);}
function cE(fT, fU, fV){ while(true){ if(fU!=null&&fU.$==1)return cJ(fT, fU.$0.El, fV);else if(fU!=null&&fU.$==2){ const fW=fU.$0;fW.Dirty=false;fU=fW.Current;} else if(fU==null)return fV;else if(fU!=null&&fU.$==4)return cJ(fT, fU.$0.Text, fV);else if(fU!=null&&fU.$==5)return cJ(fT, fU.$0, fV);else if(fU!=null&&fU.$==6)return bL((fZ, f0) =>((((f1) =>(f2) =>(f3) => f2==null||f2.constructor===Object?cE(f1, f2, f3):cJ(f1, f2, f3))(fT))(fZ))(f0), fU.$0.Els, fV);else { const fX=fU.$1;const fY=fU.$0;fU=fY;fV=cE(fT, fX, fV);} } }
function cF(fT, fU){ return ey(ez(), cK(fT, dS(), fU));}
function cG(fT, fU, fV){ if(dB()){ const fW=null;return K(() => { const fX=eA(fV);const fY=cO(fU, fX);const fZ=cN(fU, fX);return L(dC(dD(fY, cM(fU, fX))), () => L(cL(fT, fU), () => L(dC(fZ), () => { fU.PreviousNodes=fX;return M(null);})));});} else return cL(fT, fU);}
function cH(fT, fU, fV){ const fW=eA(fV);cP(fT, fU.Top);fU.PreviousNodes=fW;}
function cI(fT, fU){ const fV=fT.parentNode;const fW=globalThis.document.createTextNode("");fV.insertBefore(fW, fT);cS(fT, fU);return fW;}
function cJ(fT, fU, fV){ dv(fT, fV, fU);return fU;}
function cK(fT, fU, fV){ cD(fT, fV);const fW=dM(fT, fU);return cX.New(fW, fV, null, fT, cY(), fO(fW.OnAfterRender));}
function cL(fT, fU){ if(dI()){ const fV=(fW) => { requestAnimationFrame(() => { cP(fT, fU.Top);fW();});};return T((fW, fX, fY) => fV.apply(null, [fW, fX, fY]));} else { cP(fT, fU.Top);return M(null);} }
function cM(fT, fU){ return dG(bM((fV) => dU(fV.Attr), eE(eD(fU, eC((fV) => dT(fV.Attr), fT.PreviousNodes)))));}
function cN(fT, fU){ return dG(bM((fV) => dW(fV.Attr), eE(eD(fT.PreviousNodes, eC((fV) => dV(fV.Attr), fU)))));}
function cO(fT, fU){ const fV=(fX) => dX(fX.Attr);const fW=(fX) => eC(fV, fX);return dG(bM((fX) => dY(fX.Attr), eE(eF(fW(fT.PreviousNodes), fW(fU)))));}
function cP(fT, fU){!fT?cT(fU):void 0;cU(fU.Children);cV(fU);}
function cQ(){ return{Text:globalThis.document.createTextNode(""), Dirty:false, Value:""};}
function cR(fT, fU){ fT.Value=fU;fT.Dirty=true;}
function cS(fT, fU){ cE(fT.parentNode, fU, fT);}
function cT(fT){ function fU(fV){ function fW(fX){ while(true){ if(fX!=null&&fX.$==0){ const fY=fX.$1;const fZ=fX.$0;if(fW(fZ))return true;else fX=fY;} else if(fX!=null&&fX.$==2){ const f0=fX.$0;if(f0.Dirty)return true;else fX=f0.Current;} else if(fX!=null&&fX.$==6){ const f1=fX.$0;return f1.Dirty||bI(fU, f1.Holes);} else return false;} } return fW(fV.Children);} d1(fT.El, fT.Attr);if(fU(fT))cW(fT);}
function cU(fT){ while(true){ if(fT!=null&&fT.$==1)return cP(false, fT.$0);else if(fT!=null&&fT.$==2){ const fU=fT.$0;fT=fU.Current;} else if(fT==null)return null;else if(fT!=null&&fT.$==5)return null;else if(fT!=null&&fT.$==4){ const fV=fT.$0;return fV.Dirty?(fV.Text.nodeValue=fV.Value,fV.Dirty=false):null;} else if(fT!=null&&fT.$==6){ const fW=fT.$0;bK((fZ) => { cP(false, fZ);}, fW.Holes);bK((fZ) => { d1(fZ[0], fZ[1]);}, fW.Attrs);return cV(fW);} else { const fX=fT.$1;const fY=fT.$0;cU(fY);fT=fX;} } }
function cV(fT){ const fU=fO(fT.Render);if(fU!=null&&fU.$==1){ fU.$0(fT.El);fM(fT, "Render", null);} }
function cW(fT){ const fU=fT.El;function fV(fZ, f0){ while(true){ if(fZ!=null&&fZ.$==1)return fZ.$0.El;else if(fZ!=null&&fZ.$==2){ const f1=fZ.$0;if(f1.Dirty){ f1.Dirty=false;return cE(fU, f1.Current, f0);} else fZ=f1.Current;} else if(fZ==null)return f0;else if(fZ!=null&&fZ.$==4)return fZ.$0.Text;else if(fZ!=null&&fZ.$==5)return fZ.$0;else if(fZ!=null&&fZ.$==6){ const f2=fZ.$0;if(f2.Dirty)f2.Dirty=false;return bL((f5, f6) => f5==null||f5.constructor===Object?fV(f5, f6):f5, f2.Els, f0);} else { const f3=fZ.$1;const f4=fZ.$0;fZ=f4;f0=fV(f3, f0);} } } const fW=fT.El;fy((fZ) => { dw(fW, fZ);}, fx(fz(fT), fw(fT.El, fO(fT.Delimiters))));let fX=fT.Children;const fY=fO(fT.Delimiters);fV(fX, fY!=null&&fY.$==1?fY.$0[1]:null);}
class cX { Attr;Children;Delimiters;El;ElKey;Render;Equals(fT){ return this.ElKey===fT.ElKey;} GetHashCode(){ return this.ElKey;} static New(fT, fU, fV, fW, fX, fY){ const fZ={Attr:fT, Children:fU, El:fW, ElKey:fX};let f0=(fM(fZ, "Delimiters", fV),fM(fZ, "Render", fY),fZ);return fR(cX, f0);} }
function cY(){ cZ(c0()+1);return c0();}
function cZ(fT){ eQ.counter=fT;}
function c0(){ return eQ.counter;}
function c1(fT, fU){ return{$:2, $0:fT, $1:fU};}
function c2(fT){ return{$:0, $0:fT};}
function c3(fT, fU){ return{$:3, $0:fT, $1:fU};}
class c4 extends Error { ct;static New(fT){ return new this("New", fT);} static New_1(fT, fU, fV){ return new this("New_1", fT, fU, fV);} constructor(fT, fU, fV, fW){ let fX;if(fT=="New"){ fX=fU;fT="New_1";fU="The operation was canceled.";fV=null;fW=fX;} if(fT=="New_1"){ const fY=fU;const fZ=fV;const f0=fW;super(fY);this.inner=fZ;this.ct=f0;} } }
class c5 extends h { init;c;pending;r;constructor(){ super();this.c=false;this.pending=null;this.r=[];this.init=1;} }
class c6 extends bh { docNode_1;updates_1;elt;rvUpdates;static TreeNode(fT, fU){ const fV=ew.Create(fU);const fW=bM((fZ) => dN(fZ[1]), fT.Attrs);let fX=et(c7(), db, fW);let fY=db(fX, fV.v);return new c6(b2(fT), fY, j(fT.Els, 0), fV);} constructor(fT, fU, fV, fW){ super(fT, fU);this.docNode_1=fT;this.updates_1=fU;this.elt=fV;this.rvUpdates=fW;} }
function c7(fT){ const fU={s:c2(fT)};return() => fU;}
function c8(fT, fU){ function fV(){ b8(fU(), fT, () => { S().Fork(fV);});} S().Fork(fV);}
function c9(fT, fU){ return dc(() => b9(fT, fU()));}
function c_(fT, fU, fV, fW){ return dc(() => b_(fT, fU(), fV(), fW()));}
function c$(fT){ return dc(() => b$(bu((fU) => fU(), fT)));}
function da(fT, fU, fV){ return dc(() => ca(fT, fU(), fV()));}
function db(fT, fU){ return dc(() => cb(fT(), fU()));}
function dc(fT){ const fU={c:null, o:fT};return() => { let fV=fU.c;if(fV===null){ fV=fU.o();fU.c=fV;const fW=fV.s;if(fW!=null&&fW.$==0)fU.o=null;else cd(fV, () => { fU.c=null;});return fV;} else return fV;};}
function dd(fT){ let fU=null;let fV=0;const fW=fT.textContent;const fX=new RegExp(bg(), "g");while(fU=fX.exec(fW),fU!==null){ fT.parentNode.insertBefore(globalThis.document.createTextNode(dl(fW, Z(fV), Z(fX.lastIndex-j(fU, 0).length-1))), fT);fV=fX.lastIndex;const fY=globalThis.document.createElement("span");fY.setAttribute("ws-replace", j(fU, 1).toLowerCase());fT.parentNode.insertBefore(fY, fT);} fX.lastIndex=0;fT.textContent=dl(fW, Z(fV), null);}
function de(fT){ console.warn("Instantiating non-loaded template", fT);}
function df(fT, fU, fV){ const fW=fT.querySelector("[ws-replace]");return s(fW, null)?(console.warn("Filling non-existent text hole", fV),null):(fW.parentNode.replaceChild(globalThis.document.createTextNode(fU), fW),Z(fW.getAttribute("ws-replace")));}
function dg(fT, fU){ const fV=(fW) => { bd(fT, "["+fW+"]", (fX) => { if(!fU.Contains(fX.getAttribute(fW)))fX.removeAttribute(fW);});};fV("ws-attr");fV("ws-onafterrender");fV("ws-var");bd(fT, "[ws-hole]", (fW) => { if(!fU.Contains(fW.getAttribute("ws-hole"))){ fW.removeAttribute("ws-hole");while(fW.hasChildNodes())fW.removeChild(fW.lastChild);} });bd(fT, "[ws-replace]", (fW) => { if(!fU.Contains(fW.getAttribute("ws-replace")))fW.parentNode.removeChild(fW);});bd(fT, "[ws-on]", (fW) => { fW.setAttribute("ws-on", el(" ", bN((fX) => fU.Contains(j(em(fX, [":"], 1), 1)), em(fW.getAttribute("ws-on"), [" "], 1))));});bd(fT, "[ws-attr-holes]", (fW) => { const fX=em(fW.getAttribute("ws-attr-holes"), [" "], 1);for(let f1=0, f2=fX.length-1;f1<=f2;f1++){ const fY=j(fX, f1);let fZ=new RegExp(bg(), "g");let f0=fW.getAttribute(fY).replace(fZ, (f3, f4) => fU.Contains(f4)?f3:"");fW.setAttribute(fY, f0);} });}
function dh(fT, fU){ dk(fU);const fV=fU.nodeName.toLowerCase();const fW=fT.querySelector("[ws-attr="+fV+"]");if(s(fW, null))console.warn("Filling non-existent attr hole", fV);else { fW.removeAttribute("ws-attr");for(let fY=0, fZ=fU.attributes.length-1;fY<=fZ;fY++){ const fX=fU.attributes.item(fY);if(fX.name=="class"&&fW.hasAttribute("class"))fW.setAttribute("class", fW.getAttribute("class")+" "+fX.nodeValue);else fW.setAttribute(fX.name, fX.nodeValue);} } }
function di(fT, fU){ const fV=(fW) => { bd(fT, "["+fW+"]", (fX) => { let fY;const fZ=(fY=null,[fU.TryGetValue(fX.getAttribute(fW).toLowerCase(), {get:() => fY, set:(f0) => { fY=f0;}}), fY]);if(fZ[0])fX.setAttribute(fW, fZ[1]);});};fV("ws-hole");fV("ws-replace");fV("ws-attr");fV("ws-onafterrender");fV("ws-var");bd(fT, "[ws-on]", (fW) => { fW.setAttribute("ws-on", el(" ", bM((fX) => { let fY;const fZ=em(fX, [":"], 1);const f0=(fY=null,[fU.TryGetValue(j(fZ, 1), {get:() => fY, set:(f1) => { fY=f1;}}), fY]);return f0[0]?j(fZ, 0)+":"+f0[1]:fX;}, em(fW.getAttribute("ws-on"), [" "], 1))));});bd(fT, "[ws-attr-holes]", (fW) => { const fX=em(fW.getAttribute("ws-attr-holes"), [" "], 1);for(let fY=0, fZ=fX.length-1;fY<=fZ;fY++)((() => { const f0=j(fX, fY);return fW.setAttribute(f0, bs((f1, f2) => { const f3=f(f2);return f1.replace(new RegExp("\\${"+f3[0]+"}", "ig"), "${"+f3[1]+"}");}, fW.getAttribute(f0), fU));})());});}
function dj(fT, fU, fV){ while(true){ if(fT.hasChildNodes())fV=fU.insertBefore(fT.lastChild, fV);else return null;} }
function dk(fT){ const fU=fT.attributes;const fV=[];const fW=[];const fX=[];for(let f2=0, f3=fU.length-1;f2<=f3;f2++){ const fY=fU.item(f2);if(en(fY.nodeName, "ws-on")&&fY.nodeName!="ws-onafterrender"&&fY.nodeName!="ws-on"){ fV.push(fY.nodeName);fW.push(dl(fY.nodeName, Z("ws-on".length), null)+":"+fY.nodeValue.toLowerCase());} else if(!en(fY.nodeName, "ws-")&&(new RegExp(bg())).test(fY.nodeValue)){ let fZ=new RegExp(bg(), "g");let f0=fY.nodeValue.replace(fZ, (f4, f5) =>"${"+f5.toLowerCase()+"}");fY.nodeValue=f0;fX.push(fY.nodeName);} else void 0;} if(!(fW.length==0))fT.setAttribute("ws-on", el(" ", fW));if(!(fX.length==0))fT.setAttribute("ws-attr-holes", el(" ", fX));const f1=(f4) => { const f5=fT.getAttribute(f4);if(f5==null){ } else fT.setAttribute(f4, f5.toLowerCase());};f1("ws-hole");f1("ws-replace");f1("ws-attr");f1("ws-onafterrender");f1("ws-var");bK((f4) => { fT.removeAttribute(f4);}, fV);}
function dl(fT, fU, fV){ if(fU==null){ if(fV!=null&&fV.$==1){ const fW=fV.$0;return fW<0?"":fT.slice(0, fW+1);} else return"";} else if(fV==null)return fT.slice(fU.$0);else { const fX=fV.$0;return fX<0?"":fT.slice(fU.$0, fX+1);} }
function dm(fT){ const fU=globalThis.document.createElement("div");if(!do_1().test(fT)){ fU.appendChild(globalThis.document.createTextNode(fT));return fU;} else { const fV=ds().exec(fT);const fW=s(fV, null)?"":j(fV, 1).toLowerCase();const fX=(dp())[fW];const fY=fX?fX:dq();fU.innerHTML=fY[1]+fT.replace(dr(), "<$1></$2>")+fY[2];function fZ(f0, f1){ while(true){ if(f1===0)return f0;else { const f2=f1;f0=f0.lastChild;f1=f2-1;} } } return fZ(fU, fY[0]);} }
function dn(fT){ const fU=[];for(let fV=0, fW=fT.childNodes.length-1;fV<=fW;fV++)fU.push(fT.childNodes[fV]);return fU;}
function do_1(){ return eR.rhtml;}
function dp(){ return eR.wrapMap;}
function dq(){ return eR.defaultWrap;}
function dr(){ return eR.rxhtmlTag;}
function ds(){ return eR.rtagName;}
function dt(fT, fU, fV){ const fW=fT.querySelectorAll(fU);for(let fX=0, fY=fW.length-1;fX<=fY;fX++)fV(fW[fX]);}
function du(fT, fU){ const fV=globalThis.document.querySelectorAll(fT);for(let fW=0, fX=fV.length-1;fW<=fX;fW++)fU(fV[fW]);}
function dv(fT, fU, fV){ let fW;if(fV.parentNode===fT){ const fX=fV.nextSibling;let fY=s(fX, null)?null:fX;fW=fU===fY;} else fW=false;if(!fW)fT.insertBefore(fV, fU);}
function dw(fT, fU){ if(fU.parentNode===fT)fT.removeChild(fU);}
function dx(){ return e("The input sequence has an insufficient number of elements.");}
function dy(fT, fU){ let fV=true;let fW=0;while(fV&&fW<m(fU))if(s(fU[fW], fT))fV=false;else fW=fW+1;return!fV;}
function dz(){ return e("The input must be non-negative.");}
class dA extends h { d;GetEnumerator(){ return cx(bu((fT) => fT.K, this.d));} constructor(fT){ super();this.d=fT;} }
function dB(){ return eG();}
function dC(fT){ const fU=null;return K(() => L(dE(() => { }, eH(fT)), () => { eI(fT);return M(null);}));}
function dD(fT, fU){ return dF(eT(fT.$0, fU.$0));}
function dE(fT, fU){ const fV=fU.Duration;if(fV===0)return U();else { const fW=(fX) => { function fY(fZ){ return(f0) => { const f1=f0-fZ;fU.Compute(f1);fT();return f1<=fV?void requestAnimationFrame((f2) => {(fY(fZ))(f2);}):fX();};} requestAnimationFrame((fZ) => {(fY(fZ))(fZ);});};return T((fX, fY, fZ) => fW.apply(null, [fX, fY, fZ]));} }
function dF(fT){ return{$:0, $0:fT};}
function dG(fT){ return dF(eV(bu(eK, fT)));}
function dH(){ return dF(eW());}
function dI(){ return eO.BatchUpdatesEnabled;}
function dJ(fT){ const fU=[0];function fV(){ const fW=null;return K(() => L(fT, () => { const fX=fU[0];return s(fX, 1)?(fU[0]=0,U()):s(fX, 2)?(fU[0]=1,fV()):U();}));} return() => { const fW=fU[0];if(s(fW, 0)){ fU[0]=1;N(fV(), null);} else s(fW, 1)?fU[0]=2:void 0;};}
function dK(fT, fU, fV, fW){ const fX={DynElem:fT, DynFlags:fU, DynNodes:fV};fM(fX, "OnAfterRender", fW);return fX;}
function dL(fT){ let fU;const fV=fT.s;if(fV==null||(fV!=null&&fV.$==2?(fU=fV.$1,false):fV!=null&&fV.$==3?(fU=fV.$1,false):true))void 0;else { fT.s=null;for(let fX=0, fY=m(fU)-1;fX<=fY;fX++){ const fW=j(fU, fX);if(typeof fW=="object")(((fZ) => { dL(fZ);})(fW));else fW();} } }
function dM(fT, fU){ const fV=[];const fW=[];function fX(f0){ while(true){ if(!(f0===null)){ if(f0!=null&&f0.$==1)return fV.push(f0.$0);else if(f0!=null&&f0.$==2){ const f1=f0.$1;const f2=f0.$0;fX(f2);f0=f1;} else return f0!=null&&f0.$==3?f0.$0(fT):f0!=null&&f0.$==4?fW.push(f0.$0):null;} else return null;} } fX(fU);const fY=fV.slice(0);let fZ=dK(fT, dP(fU), fY, fW.length===0?null:Z((f0) => { bt((f1) => { f1(f0);}, fW);}));return fZ;}
function dN(fT){ return eu((fU) => fU.NChanged, c7(), db, fT.DynNodes);}
function dO(fT){ return dK(fT, 0, [], null);}
function dP(fT){ return fT!==null&&fT.hasOwnProperty("flags")?fT.flags:0;}
function dQ(fT){ return ef.A3(fT);}
function dR(fT, fU){ return ef.A1(new eX(fT, fU));}
function dS(){ return eZ.EmptyAttr;}
function dT(fT){ const fU=2;return(fT.DynFlags&fU)===fU;}
function dU(fT){ return d0(fT, (fU, fV) => fU.NGetExitAnim(fV));}
function dV(fT){ const fU=1;return(fT.DynFlags&fU)===fU;}
function dW(fT){ return d0(fT, (fU, fV) => fU.NGetEnterAnim(fV));}
function dX(fT){ const fU=4;return(fT.DynFlags&fU)===fU;}
function dY(fT){ return d0(fT, (fU, fV) => fU.NGetChangeAnim(fV));}
function dZ(fT, fU){ if(fT===null)return fU;else if(fU===null)return fT;else { const fV=ef.A2(fT, fU);d2(fV, dP(fT)|dP(fU));return fV;} }
function d0(fT, fU){ return dG(bM((fV) => fU(fV, fT.DynElem), fT.DynNodes));}
function d1(fT, fU){ bK((fV) => { fV.NSync(fT);}, fU.DynNodes);}
function d2(fT, fU){ fT.flags=fU;}
class d3 extends o { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
class d4 extends o { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
class d5 extends o { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
function d6(fT, fU){ return dQ((fV) => { fV.addEventListener(fT, (fW) =>(fU(fV))(fW), false);});}
function d7(fT){ return ef.A4(fT);}
function d8(fT, fU){ return dR(fU, (fV) =>(fW) => fV.setAttribute(fT, fW));}
function d9(fT){ return ed(fo(), fT);}
function d_(fT){ return ed(fp(), fT);}
function d$(fT){ return ed(fq(), fT);}
function ea(fT){ return ed(fr(), fT);}
function eb(fT){ return ed(fs(), fT);}
function ec(fT){ return ed(ft(), fT);}
function ed(fT, fU){ const fV=fT(fU);return ef.Append(dQ(fV[0]), ee(fV[1], fV[2]));}
function ee(fT, fU){ return dR(fU, fT);}
class ef { static Handler(fT, fU){ return ef.HandlerImpl(fT, fU);} static Concat(fT){ const fU=ev(fT);return et(dS(), ef.Append, fU);} static Create(fT, fU){ return dQ((fV) => { fV.setAttribute(fT, fU);});} static HandlerImpl(fT, fU){ return dQ((fV) => { fV.addEventListener(fT, (fW) =>(fU(fV))(fW), false);});} static Append(fT, fU){ return dZ(fT, fU);} static A4(fT){ return fR(ef, {$:4, $0:fT});} static A3(fT){ return fR(ef, {$:3, $0:fT});} static A1(fT){ return fR(ef, {$:1, $0:fT});} static A2(fT, fU){ return fR(ef, {$:2, $0:fT, $1:fU});} }
class eg extends o { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
class eh extends o { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
function ei(fT){ return{$:0, $0:fT};}
function ej(fT){ return{$:1, $0:fT};}
class ek { static Cons(fT, fU){ return fR(ek, {$:1, $0:fT, $1:fU});} static Empty=fR(ek, {$:0});GetEnumerator(){ return new cB(this, null, (fT) => { const fU=fT.s;return fU.$==0?false:(fT.c=fU.$0,fT.s=fU.$1,true);}, void 0);} }
function el(fT, fU){ return bO(fU).join(fT);}
function em(fT, fU, fV){ return eo(fT, new RegExp("["+ep(fU.join(""))+"]"), fV);}
function en(fT, fU){ return fT.substring(0, fU.length)==fU;}
function eo(fT, fU, fV){ return fV===1?bN((fW) => fW!=="", eq(fT, fU)):eq(fT, fU);}
function ep(fT){ return fT.replace(new RegExp("[-\\/\\\\^$*+?.()|[\\]{}]", "g"), "\\$&");}
function eq(fT, fU){ return fT.split(fU);}
function er(fT, fU){ return bD(fT, es(fU));}
function es(fT){ return fT==null?"":fT;}
function et(fT, fU, fV){ const fW=m(fV);function fX(fY){ return(fZ) => { let f0;switch(fZ<=0?0:fZ===1?fY>=0&&fY<fW?1:(f0=fZ,2):(f0=fZ,2)){ case 0:return fT;case 1:return j(fV, fY);case 2:const f1=fZ/2>>0;return fU((fX(fY))(f1), (fX(fY+f1))(fZ-f1));} };} return(fX(0))(fW);}
function eu(fT, fU, fV, fW){ const fX=m(fW);function fY(fZ){ return(f0) => { let f1;switch(f0<=0?0:f0===1?fZ>=0&&fZ<fX?1:(f1=f0,2):(f1=f0,2)){ case 0:return fU;case 1:return fT(j(fW, fZ));case 2:const f2=f0/2>>0;return fV((fY(fZ))(f2), (fY(fZ+f2))(f0-f2));} };} return(fY(0))(fX);}
function ev(fT){ if(fT instanceof Array)return fT;else if(fT instanceof ek)return bQ(fT);else if(fT===null)return[];else { const fU=[];const fV=cx(fT);try { while(fV.MoveNext())fU.push(fV.Current);return fU;} finally { if(typeof fV=="object"&&a(fV))fV.Dispose();} } }
class ew { c;s;v;static Create(fT){ let fU;fU=null;fU=ew.New(fT, null, () => { let fV;fV=fU.s;return fV===null?(fV=cc(fU.c()),fU.s=fV,cd(fV, () => { fU.s=null;}),fV):fV;});return fU;} static New(fT, fU, fV){ return fR(ew, {c:fT, s:fU, v:fV});} }
class ex extends h { d;GetEnumerator(){ return cx(bu((fT) => fT.V, this.d));} constructor(fT){ super();this.d=fT;} }
function ey(fT, fU){ return{PreviousNodes:fT, Top:fU};}
function ez(){ return eB(new bp("New_3"));}
function eA(fT){ const fU=[];function fV(fY, fZ){ while(true)switch(fY){ case 0:if(fZ!=null&&fZ.$==0){ const f0=fZ.$1;const f1=fZ.$0;fV(0, f1);fZ=f0;} else if(fZ!=null&&fZ.$==1){ const f2=fZ.$0;fZ=f2;fY=1;} else if(fZ!=null&&fZ.$==2){ const f3=fZ.$0;fZ=f3.Current;} else if(fZ!=null&&fZ.$==6){ const f4=fZ.$0.Holes;return(((f5) =>(f6) => { bK(f5, f6);})(fX))(f4);} else return null;break;case 1:fU.push(fZ);fZ=fZ.Children;fY=0;break;} } function fW(fY){ return fV(0, fY);} function fX(fY){ return fV(1, fY);} fW(fT);return eB(new bp("New_2", fU));}
function eB(fT){ return{$:0, $0:fT};}
function eC(fT, fU){ return eB(e1(fT, fU.$0));}
function eD(fT, fU){ return eB(e2(fT.$0, fU.$0));}
function eE(fT){ return e3(fT.$0);}
function eF(fT, fU){ return eB(e4(fT.$0, fU.$0));}
function eG(){ return eS.UseAnimations;}
function eH(fT){ return eJ(bF((fU) => fU.$==1?Z(fU.$0):null, eU(fT.$0)));}
function eI(fT){ bK((fU) => { if(fU.$==0)fU.$0();}, eU(fT.$0));}
function eJ(fT){ const fU=ev(fT);const fV=m(fU);if(fV===0)return eL();else if(fV===1)return j(fU, 0);else { const fW=bx(bu((fY) => fY.Duration, fU));const fX=bM((fY) => eN(fW, fY), fU);return eM(fW, (fY) => { bK((fZ) => { fZ.Compute(fY);}, fX);});} }
function eK(fT){ return fT.$0;}
function eL(fT){ return eM(0, () => fT);}
function eM(fT, fU){ return{Compute:fU, Duration:fT};}
function eN(fT, fU){ const fV=fU.Compute;const fW=fU.Duration;const fX=fE(() => fU.Compute(fU.Duration));return{Compute:(fY) => fY>=fW?fX.f():fV(fY), Duration:fT};}
let eO=fN((fT) => class fU { static { eO=fT(this);} static BatchUpdatesEnabled;static { this.BatchUpdatesEnabled=true;} });
function eP(fT){ let fU=[];let fV;for(var fW in fT)fU.push.apply(fU, fT[fW]);return fU;}
let eQ=fN((fT) => class fU { static { eQ=fT(this);} static counter;static { this.counter=0;} });
let eR=fN((fT) => class fU { static { eR=fT(this);} static defaultWrap;static wrapMap;static rhtml;static rtagName;static rxhtmlTag;static { this.rxhtmlTag=new RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>", "gi");this.rtagName=new RegExp("<([\\w:]+)");this.rhtml=new RegExp("<|&#?\\w+;");const fV=[1, "<table>", "</table>"];let fW=Object.fromEntries([["option", [1, "<select multiple='multiple'>", "</select>"]], ["legend", [1, "<fieldset>", "</fieldset>"]], ["area", [1, "<map>", "</map>"]], ["param", [1, "<object>", "</object>"]], ["thead", fV], ["tbody", fV], ["tfoot", fV], ["tr", [2, "<table><tbody>", "</tbody></table>"]], ["col", [2, "<table><colgroup>", "</colgoup></table>"]], ["td", [3, "<table><tbody><tr>", "</tr></tbody></table>"]]]);this.wrapMap=fW;this.defaultWrap=[0, "", ""];} });
let eS=fN((fT) => class fU { static { eS=fT(this);} static UseAnimations;static CubicInOut;static { this.CubicInOut=e0.Custom((fV) => { const fW=fV*fV;return 3*fW-2*(fW*fV);});this.UseAnimations=true;} });
function eT(fT, fU){ return fT.$==0?fU:fU.$==0?fT:{$:2, $0:fT, $1:fU};}
function eU(fT){ const fU=[];function fV(fW){ while(true){ if(fW.$==1)return fU.push(fW.$0);else if(fW.$==2){ const fX=fW.$1;const fY=fW.$0;fV(fY);fW=fX;} else return fW.$==3?bK((fZ) => { fU.push(fZ);}, fW.$0):null;} } fV(fT);return fU.slice(0);}
function eV(fT){ const fU=ev(fT);return et(eW(), eT, fU);}
function eW(){ return fH.Empty;}
class eX extends h { push;value;dirty;updates;get NChanged(){ return this.updates;} NGetExitAnim(fT){ return dH();} NGetEnterAnim(fT){ return dH();} NGetChangeAnim(fT){ return dH();} NSync(fT){ if(this.dirty){(this.push(fT))(this.value);this.dirty=false;} } constructor(fT, fU){ super();this.push=fU;this.value=void 0;this.dirty=false;this.updates=c9((fV) => { this.value=fV;this.dirty=true;}, fT);} }
class eY extends Error { static New(){ return new this("New");} static New_1(fT){ return new this("New_1", fT);} constructor(fT, fU){ if(fT=="New"){ fT="New_1";fU="The given key was not present in the dictionary.";} if(fT=="New_1"){ const fV=fU;super(fV);} } }
let eZ=fN((fT) => class fU { static { eZ=fT(this);} static FloatApplyChecked;static FloatGetChecked;static FloatSetChecked;static FloatApplyUnchecked;static FloatGetUnchecked;static FloatSetUnchecked;static IntApplyChecked;static IntGetChecked;static IntSetChecked;static IntApplyUnchecked;static IntGetUnchecked;static IntSetUnchecked;static FileApplyUnchecked;static FileGetUnchecked;static FileSetUnchecked;static DateTimeApplyUnchecked;static DateTimeGetUnchecked;static DateTimeSetUnchecked;static StringListApply;static StringListGet;static StringListSet;static StringApply;static StringGet;static StringSet;static BoolCheckedApply;static EmptyAttr;static { this.EmptyAttr=null;this.BoolCheckedApply=(f$) =>[(ga) => { ga.addEventListener("change", () => f$.Get()!=ga.checked?f$.Set(ga.checked):null);}, (ga) =>(gb) => gb!=null&&gb.$==1?void(ga.checked=gb.$0):null, c9(Z, f$.View)];this.StringSet=(f$) =>(ga) => { f$.value=ga;};this.StringGet=(f$) => Z(f$.value);const fV=e_();const fW=e9();this.StringApply=(f$) => e8(fV, fW, f$);this.StringListSet=(f$) =>(ga) => { const gb=f$.options;for(let gc=0, gd=gb.length-1;gc<=gd;gc++)((() => { const ge=gb.item(gc);ge.selected=dy(ge.value, ga);})());};this.StringListGet=(f$) => { const ga=f$.selectedOptions;return Z(bO(bv(() => bw((gb) =>[ga.item(gb).value], g(0, ga.length-1)))));};const fX=fa();const fY=e$();this.StringListApply=(f$) => e8(fX, fY, f$);this.DateTimeSetUnchecked=(f$) =>(ga) => { f$.value=(new Date(ga)).toLocaleString();};this.DateTimeGetUnchecked=(f$) => { let ga;let gb;const gc=f$.value;if(fu(gc))return Z(-8640000000000000);else { ga=0;const gd=fC(gc);let ge=gd!=null&&gd.$==1&&(ga=gd.$0,true);gb=[ge, ga];return gb[0]?Z(gb[1]):null;} };const fZ=fc();const f0=fb();this.DateTimeApplyUnchecked=(f$) => e8(fZ, f0, f$);this.FileSetUnchecked=() =>() => null;this.FileGetUnchecked=(f$) => { const ga=f$.files;return Z(bO(bv(() => bu((gb) => ga.item(gb), g(0, ga.length-1)))));};const f1=ff();const f2=fe();this.FileApplyUnchecked=(f$) => fd(f1, f2, f$);this.IntSetUnchecked=(f$) =>(ga) => { f$.value=String(ga);};this.IntGetUnchecked=(f$) => { const ga=f$.value;if(fu(ga))return Z(0);else { const gb=+ga;return gb!==gb>>0?null:Z(gb);} };const f3=fh();const f4=fg();this.IntApplyUnchecked=(f$) => e8(f3, f4, f$);this.IntSetChecked=(f$) =>(ga) => { const gb=ga.Input;return f$.value!=gb?void(f$.value=gb):null;};this.IntGetChecked=(f$) => { let ga;let gb;const gc=f$.value;if(fu(gc))ga=(f$.checkValidity?f$.checkValidity():true)?fv.Blank(gc):fv.Invalid(gc);else { const gd=(gb=0,[b6(gc, {get:() => gb, set:(ge) => { gb=ge;}}), gb]);ga=gd[0]?fv.Valid(gd[1], gc):fv.Invalid(gc);} return Z(ga);};const f5=fj();const f6=fi();this.IntApplyChecked=(f$) => e8(f5, f6, f$);this.FloatSetUnchecked=(f$) =>(ga) => { f$.value=String(ga);};this.FloatGetUnchecked=(f$) => { const ga=f$.value;if(fu(ga))return Z(0);else { const gb=+ga;return isNaN(gb)?null:Z(gb);} };const f7=fl();const f8=fk();this.FloatApplyUnchecked=(f$) => e8(f7, f8, f$);this.FloatSetChecked=(f$) =>(ga) => { const gb=ga.Input;return f$.value!=gb?void(f$.value=gb):null;};this.FloatGetChecked=(f$) => { let ga;const gb=f$.value;if(fu(gb))ga=(f$.checkValidity?f$.checkValidity():true)?fv.Blank(gb):fv.Invalid(gb);else { const gc=+gb;ga=isNaN(gc)?fv.Invalid(gb):fv.Valid(gc, gb);} return Z(ga);};const f9=fn();const f_=fm();this.FloatApplyChecked=(f$) => e8(f9, f_, f$);} });
class e0 extends h { transformTime;static Custom(fT){ return new e0(fT);} constructor(fT){ super();this.transformTime=fT;} }
function e1(fT, fU){ return new bp("New_2", bN(fT, e3(fU)));}
function e2(fT, fU){ const fV=new bp("New_2", e3(fU));fV.ExceptWith(e3(fT));return fV;}
function e3(fT){ const fU=bS(fT.Count, void 0);fT.CopyTo(fU, 0);return fU;}
function e4(fT, fU){ const fV=new bp("New_2", e3(fT));fV.IntersectWith(e3(fU));return fV;}
function e5(fT){ return fT.$==1?fT.$0:e7();}
function e6(fT){ return fT.$==1?fT.$1:e7();}
function e7(){ return e("The input list was empty.");}
function e8(fT, fU, fV){ let fW;fW=null;return[(fX) => { const fY=() => { fV.UpdateMaybe((fZ) => { let f0;fW=fT(fX);return fW!=null&&fW.$==1&&(!s(fW.$0, fZ)&&(f0=[fW, fW.$0],true))?f0[0]:null;});};fX.addEventListener("change", fY);fX.addEventListener("input", fY);fX.addEventListener("keypress", fY);}, (fX) => { const fY=fU(fX);return(fZ) => fZ==null?null:fY(fZ.$0);}, c9((fX) => { let fY;return fW!=null&&fW.$==1&&(s(fW.$0, fX)&&(fY=fW.$0,true))?null:Z(fX);}, fV.View)];}
function e9(){ return eZ.StringSet;}
function e_(){ return eZ.StringGet;}
function e$(){ return eZ.StringListSet;}
function fa(){ return eZ.StringListGet;}
function fb(){ return eZ.DateTimeSetUnchecked;}
function fc(){ return eZ.DateTimeGetUnchecked;}
function fd(fT, fU, fV){ let fW;fW=null;return[(fX) => { fX.addEventListener("change", () => { fV.UpdateMaybe((fY) => { let fZ;fW=fT(fX);return fW!=null&&fW.$==1&&(fW.$0!==fY&&(fZ=[fW, fW.$0],true))?fZ[0]:null;});});}, (fX) => { const fY=fU(fX);return(fZ) => fZ==null?null:fY(fZ.$0);}, c9((fX) => { let fY;return fW!=null&&fW.$==1&&(s(fW.$0, fX)&&(fY=fW.$0,true))?null:Z(fX);}, fV.View)];}
function fe(){ return eZ.FileSetUnchecked;}
function ff(){ return eZ.FileGetUnchecked;}
function fg(){ return eZ.IntSetUnchecked;}
function fh(){ return eZ.IntGetUnchecked;}
function fi(){ return eZ.IntSetChecked;}
function fj(){ return eZ.IntGetChecked;}
function fk(){ return eZ.FloatSetUnchecked;}
function fl(){ return eZ.FloatGetUnchecked;}
function fm(){ return eZ.FloatSetChecked;}
function fn(){ return eZ.FloatGetChecked;}
function fo(){ return eZ.StringApply;}
function fp(){ return eZ.FloatApplyUnchecked;}
function fq(){ return eZ.BoolCheckedApply;}
function fr(){ return eZ.DateTimeApplyUnchecked;}
function fs(){ return eZ.FileApplyUnchecked;}
function ft(){ return eZ.StringListApply;}
function fu(fT){ return er(fB, fT);}
class fv { get Input(){ return this.$==1?this.$0:this.$==2?this.$0:this.$1;} static Blank(fT){ return fR(fv, {$:2, $0:fT});} static Invalid(fT){ return fR(fv, {$:1, $0:fT});} static Valid(fT, fU){ return fR(fv, {$:0, $0:fT, $1:fU});} }
function fw(fT, fU){ let fV;if(fU!=null&&fU.$==1){ const fW=[];fV=fU.$0[0].nextSibling;while(fV!==fU.$0[1]){ fW.push(fV);fV=fV.nextSibling;} return fA(fW);} else { let fX=fT.childNodes.length;const fY=fT.childNodes;let fZ=bT(fX, (f0) => fY[f0]);return fA(fZ);} }
function fx(fT, fU){ const fV=fT.$0;return fA(bN((fW) => bR((fX) =>!(fW===fX), fV), fU.$0));}
function fy(fT, fU){ bK(fT, fU.$0);}
function fz(fT){ const fU=[];function fV(fW){ while(true){ if(fW!=null&&fW.$==2){ const fX=fW.$0;fW=fX.Current;} else if(fW!=null&&fW.$==1)return fU.push(fW.$0.El);else if(fW==null)return null;else if(fW!=null&&fW.$==5)return fU.push(fW.$0);else if(fW!=null&&fW.$==4)return fU.push(fW.$0.Text);else if(fW!=null&&fW.$==6){ const fY=fW.$0.Els;return(((f1) =>(f2) => { bK(f1, f2);})((f1) => { if(f1==null||f1.constructor===Object)fV(f1);else fU.push(f1);}))(fY);} else { const fZ=fW.$1;const f0=fW.$0;fV(f0);fW=fZ;} } } fV(fT.Children);return fA(ev(fU));}
function fA(fT){ return{$:0, $0:fT};}
function fB(fT){ return fT.match(new RegExp("\\s"))!==null;}
function fC(fT){ const fU=Date.parse(fT);return isNaN(fU)?null:Z(fU);}
function fD(fT, fU, fV, fW){ const fX=+fT;const fY=fX===fX-fX%1&&fX>=fU&&fX<=fV;if(fY)fW.set(fX);return fY;}
function fE(fT){ return fJ(false, fT, fF);}
function fF(){ const fT=this.v();this.c=true;this.v=fT;this.f=fG;return fT;}
function fG(){ return this.v;}
let fH=fN((fT) => class fU { static { fH=fT(this);} static Empty;static { this.Empty={$:0};} });
function fI(fT){ fT.splice(0, m(fT));}
function fJ(fT, fU, fV){ return{c:fT, v:fU, f:fV};}
fS(() => { b();});
fK();

